!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3"),require("jQuery"),require("tippy.js")):"function"==typeof define&&define.amd?define("nodelink_vis_coauthorship",["d3","jQuery","tippy.js"],e):"object"==typeof exports?exports.nodelink_vis_coauthorship=e(require("d3"),require("jQuery"),require("tippy.js")):t.nodelink_vis_coauthorship=e(t.d3,t.jQuery,t.tippy)}("undefined"!=typeof self?self:this,function(t,e,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NodeLinkCoauthorshipVis",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"activateTooltips",{enumerable:!0,get:function(){return o.default}});var r=i(n(3)),o=i(n(4));function i(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0));function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=((r=n(1))&&r.__esModule?r:{default:r}).default,u=function(){var t,e,n=[],r=960,u=o.scaleOrdinal(o.schemeCategory10),l=o.forceManyBody().strength(-2);function c(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.source.toString(),r=t.target.toString(),o=[n,r];return!0===e&&o.sort(),o[0]+"-&-"+o[1]}function f(i){i.each(function(){var i=.625*r,f=o.select(this).append("svg").attr("width",r).attr("height",i);function s(t){o.event.active||h.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function d(t){t.fx=o.event.x,t.fy=o.event.y}function p(t){o.event.active||h.alphaTarget(0),t.fx=null,t.fy=null}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=u(0);m.domain(o.extent(g.nodes,function(t){return t.hasOwnProperty("flow")?t.flow:[5,5]})),console.log(m.domain());var a=t.enter().append("g").attr("class","node").call(o.drag().on("start",s).on("drag",d).on("end",p));t=t.merge(a).attr("cx",function(t){return t.x=r/2+t.x}).attr("cy",function(t){return t.y=i/2+t.y}).each(function(t){t.hasOwnProperty("flow")?t.radius=m(t.flow):t.radius=5,t.hasOwnProperty("cl_top")?t.color=u(t.cl_top):t.color=n});a.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).append("circle").attr("fill",function(t){return t.color}).attr("r",0);return null!==e?t.selectAll("circle").transition(e).attr("r",function(t){return t.radius}).attr("fill",function(t){return t.color}):t.selectAll("circle").attr("r",function(t){return t.radius}).attr("fill",function(t){return t.color}),t}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.enter().append("line").attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}).attr("class","link");return(t=t.merge(n)).attr("stroke-width",function(t){return Math.sqrt(t.weight)}),null!==e&&n.style("stroke","green"),t}var g=n;console.log(g),g.nodes.forEach(function(t){t.id=t.id.toString()}),g.links.forEach(function(t){t.id=c(t,g.directed)});var h=o.forceSimulation().force("link",o.forceLink().id(function(t){return t.id})).force("charge",l).force("center",o.forceCenter(r/2,i/2));h.nodes(g.nodes).on("tick",O),h.force("link").links(g.links);var m=o.scaleLinear().range([4,12]),b=f.append("g"),x=b.append("g").attr("class","links").selectAll(".link");x=x.data(g.links,function(t){return t.id});var _=b.append("g").attr("class","nodes").selectAll(".node");function O(){_.attr("cx",function(t){return t.x=Math.max(t.radius,Math.min(r-t.radius,t.x)),t.x}).attr("cy",function(t){return t.y=Math.max(t.radius,Math.min(r-t.radius,t.y)),t.y}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),x.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y})}_=y(_=_.data(g.nodes,function(t){return t.id})),x=v(x),f.on("click",function(){_.classed("focus",!1),_.selectAll("text").style("display","none"),x.style("opacity",1),a("#nodelab-form").css("visibility","hidden")}),e=function(){},t=function(){(g=n).nodes.forEach(function(t){t.id=t.id.toString()}),g.links.forEach(function(t){t.id=c(t,g.directed)}),h.nodes(g.nodes).on("tick",O),h.force("link").links(g.links),console.log(g),h.stop();var t=(_=_.data(g.nodes,function(t){return t.id})).exit(),e=o.transition("updateData").duration(5e3);t.selectAll("circle").style("stroke","red").transition(e).attr("r",0),_=y(_,e);var r=(x=x.data(g.links,function(t){return t.id})).exit();r.style("stroke","red").transition(e).style("opacity",0).remove(),x=v(x,e),h.on("tick").call(),e.end().then(function(e){t.remove(),console.log("dddd")}),console.log("ssss")}})}return f.data=function(e){return arguments.length?(n=e,console.log(i(t)),"function"==typeof t&&t(),f):n},f.width=function(t){return arguments.length?(r=t,"function"==typeof e&&e(),f):r},f};e.default=u,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(5));n(6);var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}console.log(r.default);var u=i.default,l=function(){function t(t,e,n){t.find("."+e).find(".template-content").text(n)}console.log("activateTooltips()"),o.selectAll(".node circle").each(function(e){var n=u(c).clone().attr("id",null);if(this.hasOwnProperty("_tippy"))var o=this._tippy;else var o=(0,r.default)(this);t(n,"author_name",e.author_name),t(n,"affil_name",e.affil_name),e.hasOwnProperty("cl_bottom")&&t(n,"cluster_id",e.cl_bottom);for(var i=n.find(".paper_titles").find(".template-content"),a=0,l=e.papers.length;a<l;a++){var f=u('<li class="paper_title">').text(e.papers[a].title);i.append(f)}o.setContent(n.html())})};e.default=l,r.default.setDefaults({theme:"light-border",animateFill:!1,animation:"fade"});var c=document.getElementById("tooltip-template");t.exports=e.default},function(t,e){t.exports=n},function(t,e){}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub2RlbGlua192aXNfY29hdXRob3JzaGlwL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9ub2RlbGlua192aXNfY29hdXRob3JzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL25vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXAvZXh0ZXJuYWwgXCJkM1wiIiwid2VicGFjazovL25vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXAvZXh0ZXJuYWwgXCJqUXVlcnlcIiIsIndlYnBhY2s6Ly9ub2RlbGlua192aXNfY29hdXRob3JzaGlwLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL25vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXAvLi9zcmMvdmlzLmpzIiwid2VicGFjazovL25vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXAvLi9zcmMvY29hdXRob3JzaGlwX3Rvb2x0aXBzLmpzIiwid2VicGFjazovL25vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXAvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcInRpcHB5LmpzXCIsXCJjb21tb25qczJcIjpcInRpcHB5LmpzXCIsXCJhbWRcIjpcInRpcHB5LmpzXCIsXCJyb290XCI6XCJ0aXBweVwifSJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181X18iLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX3ZpcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY29hdXRob3JzaGlwX3Rvb2x0aXBzIiwiZDMiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIiQiLCJkZWZhdWx0IiwidXBkYXRlRGF0YSIsInVwZGF0ZVdpZHRoIiwiZGF0YSIsIndpZHRoIiwiY29sb3IiLCJzY2FsZU9yZGluYWwiLCJzY2hlbWVDYXRlZ29yeTEwIiwibWFueUJvZHkiLCJmb3JjZU1hbnlCb2R5Iiwic3RyZW5ndGgiLCJnZXRMaW5rSWQiLCJsaW5rIiwiZGlyZWN0ZWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJzb3VyY2UiLCJ0b1N0cmluZyIsInRhcmdldCIsIml0ZW1zIiwic29ydCIsImNoYXJ0Iiwic2VsZWN0aW9uIiwiZWFjaCIsImhlaWdodCIsInN2ZyIsInNlbGVjdCIsImFwcGVuZCIsImF0dHIiLCJkcmFnc3RhcnRlZCIsImV2ZW50IiwiYWN0aXZlIiwic2ltdWxhdGlvbiIsImFscGhhVGFyZ2V0IiwicmVzdGFydCIsImZ4IiwieCIsImZ5IiwieSIsImRyYWdnZWQiLCJkcmFnZW5kZWQiLCJlbnRlck5vZGVzIiwibm9kZSIsImRlZmF1bHRDb2xvciIsInNpemVTY2FsZSIsImRvbWFpbiIsImV4dGVudCIsImdyYXBoIiwibm9kZXMiLCJmbG93IiwiY29uc29sZSIsImxvZyIsIm5vZGVFbnRlciIsImVudGVyIiwiZHJhZyIsIm9uIiwibWVyZ2UiLCJyYWRpdXMiLCJjbF90b3AiLCJzZWxlY3RBbGwiLCJ0cmFuc2l0aW9uIiwiZW50ZXJMaW5rcyIsImxpbmtFbnRlciIsIk1hdGgiLCJzcXJ0Iiwid2VpZ2h0Iiwic3R5bGUiLCJmb3JFYWNoIiwiaWQiLCJsaW5rcyIsImZvcmNlU2ltdWxhdGlvbiIsImZvcmNlIiwiZm9yY2VMaW5rIiwiZm9yY2VDZW50ZXIiLCJ0aWNrZWQiLCJzY2FsZUxpbmVhciIsInJhbmdlIiwiZyIsIm1heCIsIm1pbiIsImNsYXNzZWQiLCJjc3MiLCJzdG9wIiwibm9kZUV4aXQiLCJleGl0IiwiZHVyYXRpb24iLCJsaW5rRXhpdCIsInJlbW92ZSIsImVuZCIsInRoZW4iLCJfdHlwZW9mIiwiX3RpcHB5IiwiX2pxdWVyeSIsImZpbGxIdG1sIiwiJHRlbXBsYXRlIiwiY2xhc3NuYW1lIiwidGV4dENvbnRlbnQiLCJmaW5kIiwidGV4dCIsIiR0b29sdGlwTm9kZSIsInRlbXBsYXRlIiwiY2xvbmUiLCJ0aXBweUluc3RhbmNlIiwiYXV0aG9yX25hbWUiLCJhZmZpbF9uYW1lIiwiY2xfYm90dG9tIiwiJHBhcGVyVGl0bGVzIiwibGVuIiwicGFwZXJzIiwiJGxpc3RJdGVtIiwidGl0bGUiLCJzZXRDb250ZW50IiwiaHRtbCIsInNldERlZmF1bHRzIiwidGhlbWUiLCJhbmltYXRlRmlsbCIsImFuaW1hdGlvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELEVBQUFHLFFBQUEsTUFBQUEsUUFBQSxVQUFBQSxRQUFBLGFBQ0EsbUJBQUFDLGVBQUFDLElBQ0FELE9BQUEsdURBQUFKLEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsMEJBQUFELEVBQUFHLFFBQUEsTUFBQUEsUUFBQSxVQUFBQSxRQUFBLGFBRUFKLEVBQUEsMEJBQUFDLEVBQUFELEVBQUEsR0FBQUEsRUFBQSxPQUFBQSxFQUFBLE9BUkEsQ0FTQyxvQkFBQU8sVUFBQUMsS0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNELG1CQ1RBLElBQUFDLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVB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U3hELEdBQzFDLElBQUlvSSxFQUFlckcsRUFBRXNHLEdBQVVDLFFBQVF6RSxLQUFLLEtBQU0sTUFDbEQsR0FBSTFFLEtBQUtvQyxlQUFlLFVBQ3ZCLElBQUlnSCxFQUFnQnBKLEtBQUt5SSxZQUV6QixJQUFJVyxHQUFnQixFQUFBWCxFQUFBNUYsU0FBTTdDLE1BRTNCMkksRUFBU00sRUFBYyxjQUFlcEksRUFBRXdJLGFBQ3hDVixFQUFTTSxFQUFjLGFBQWNwSSxFQUFFeUksWUFDbkN6SSxFQUFFdUIsZUFBZSxjQUFjdUcsRUFBU00sRUFBYyxhQUFjcEksRUFBRTBJLFdBRTFFLElBREEsSUFBSUMsRUFBZVAsRUFBYUYsS0FBTSxpQkFBa0JBLEtBQU0scUJBQ3JEeEksRUFBSSxFQUFHa0osRUFBTTVJLEVBQUU2SSxPQUFPOUYsT0FBUXJELEVBQUlrSixFQUFLbEosSUFBSyxDQUNwRCxJQUFJb0osRUFBWS9HLEVBQUcsNEJBQTZCb0csS0FBS25JLEVBQUU2SSxPQUFPbkosR0FBR3FKLE9BQ2pFSixFQUFhL0UsT0FBUWtGLEdBRXRCUCxFQUFjUyxXQUFXWixFQUFhYSx1QkE3QnhDckIsRUFBQTVGLFFBQU1rSCxZQUFZLENBQ2pCQyxNQUFTLGVBQ1RDLGFBQWUsRUFDZkMsVUFBYSxTQUVkLElBQU1oQixFQUFXaUIsU0FBU0MsZUFBZSx1RENoQnpDekssRUFBQUQsUUFBQVMiLCJmaWxlIjoibm9kZWxpbmtfdmlzX2NvYXV0aG9yc2hpcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJkM1wiKSwgcmVxdWlyZShcImpRdWVyeVwiKSwgcmVxdWlyZShcInRpcHB5LmpzXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwibm9kZWxpbmtfdmlzX2NvYXV0aG9yc2hpcFwiLCBbXCJkM1wiLCBcImpRdWVyeVwiLCBcInRpcHB5LmpzXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIm5vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXBcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJkM1wiKSwgcmVxdWlyZShcImpRdWVyeVwiKSwgcmVxdWlyZShcInRpcHB5LmpzXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJub2RlbGlua192aXNfY29hdXRob3JzaGlwXCJdID0gZmFjdG9yeShyb290W1wiZDNcIl0sIHJvb3RbXCJqUXVlcnlcIl0sIHJvb3RbXCJ0aXBweVwiXSk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzVfXykge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fOyIsImltcG9ydCBOb2RlTGlua0NvYXV0aG9yc2hpcFZpcyBmcm9tICcuL3Zpcy5qcyc7XG5pbXBvcnQgYWN0aXZhdGVUb29sdGlwcyBmcm9tICcuL2NvYXV0aG9yc2hpcF90b29sdGlwcy5qcyc7XG5leHBvcnQgeyBOb2RlTGlua0NvYXV0aG9yc2hpcFZpcywgYWN0aXZhdGVUb29sdGlwcyB9O1xuXG4iLCIvLyBOb2RlTGlua0NvYXV0aG9yc2hpcFZpc1xuXG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgalF1ZXJ5IGZyb20gJ2pxdWVyeSc7XG5jb25zdCAkID0galF1ZXJ5O1xuXG5leHBvcnQgZGVmYXVsdCBOb2RlTGlua0NvYXV0aG9yc2hpcFZpcztcblxuXG5cbi8vIHJldXNhYmxlIGNoYXJ0IHBhdHRlcm4gaW5zcGlyZWQgYnk6XG4vLyBodHRwczovL2Jvc3Qub2Nrcy5vcmcvbWlrZS9jaGFydC9cbi8vIGFuZFxuLy8gaHR0cHM6Ly93d3cudG9wdGFsLmNvbS9kMy1qcy90b3dhcmRzLXJldXNhYmxlLWQzLWpzLWNoYXJ0c1xuZnVuY3Rpb24gTm9kZUxpbmtDb2F1dGhvcnNoaXBWaXMoKSB7XG5cdHZhciBkYXRhID0gW107XG5cdHZhciB3aWR0aCA9IDk2MDtcblxuXHR2YXIgdXBkYXRlRGF0YTtcblx0dmFyIHVwZGF0ZVdpZHRoO1xuXG5cdHZhciBjb2xvciA9IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKTtcblxuXHR2YXIgbWFueUJvZHkgPSBkMy5mb3JjZU1hbnlCb2R5KClcblx0XHRcdFx0XHRcdC5zdHJlbmd0aCgtMik7XG5cblx0ZnVuY3Rpb24gZ2V0TGlua0lkKGxpbmssIGRpcmVjdGVkID0gZmFsc2UpIHtcblx0XHQvLyBsaW5rIElEIHdpbGwgYmUgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlIHNvdXJjZSBJRCBhbmQgdGFyZ2V0IElELCBzZXBhcmF0ZWQgYnkgXCItJi1cIlxuXHRcdC8vIElmIHRoZSBncmFwaCBpcyB1bmRpcmVjdGVkLCB0aGUgSURzIHdpbGwgYmUgc29ydGVkIEFMUEhBQkVUSUNBTExZIHVzaW5nIHRoZSBzdHJpbmcgdmFsdWVzIG9mIHRoZSBJRFxuXHRcdHZhciBzb3VyY2UgPSBsaW5rLnNvdXJjZS50b1N0cmluZygpO1xuXHRcdHZhciB0YXJnZXQgPSBsaW5rLnRhcmdldC50b1N0cmluZygpO1xuXHRcdHZhciBpdGVtcyA9IFtzb3VyY2UsIHRhcmdldF07XG5cdFx0dmFyIHNlcCA9IFwiLSYtXCI7XG5cdFx0aWYgKGRpcmVjdGVkID09PSB0cnVlKSB7XG5cdFx0XHRpdGVtcy5zb3J0KCk7XG5cdFx0fVxuXHRcdHJldHVybiBpdGVtc1swXSArIHNlcCArIGl0ZW1zWzFdO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBjaGFydChzZWxlY3Rpb24pIHtcblx0XHRzZWxlY3Rpb24uZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxJdGVtID0gdGhpcztcblxuXHRcdFx0dmFyIGhlaWdodCA9IC42MjUgKiB3aWR0aDtcblx0XHRcdHZhciBzdmcgPSBkMy5zZWxlY3Qoc2VsSXRlbSkuYXBwZW5kKFwic3ZnXCIpLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCkuYXR0cihcImhlaWdodFwiLCBoZWlnaHQpO1xuXG5cdFx0XHRmdW5jdGlvbiBkcmFnc3RhcnRlZChkKSB7XG5cdFx0XHRcdGlmICghZDMuZXZlbnQuYWN0aXZlKSBzaW11bGF0aW9uLmFscGhhVGFyZ2V0KDAuMykucmVzdGFydCgpO1xuXHRcdFx0XHRkLmZ4ID0gZC54O1xuXHRcdFx0XHRkLmZ5ID0gZC55O1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBkcmFnZ2VkKGQpIHtcblx0XHRcdFx0ZC5meCA9IGQzLmV2ZW50Lng7XG5cdFx0XHRcdGQuZnkgPSBkMy5ldmVudC55O1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBkcmFnZW5kZWQoZCkge1xuXHRcdFx0XHRpZiAoIWQzLmV2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwKTtcblx0XHRcdFx0ZC5meCA9IG51bGw7XG5cdFx0XHRcdGQuZnkgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBlbnRlck5vZGVzKG5vZGUsIHQgPSBudWxsKSB7XG5cdFx0XHRcdC8vIHBhc3MgaW4gdGhlIHNlbGVjdGlvbiBmb3IgZW50ZXJpbmcgbm9kZXNcblxuXHRcdFx0XHR2YXIgZGVmYXVsdENvbG9yID0gY29sb3IoMCk7XG5cblx0XHRcdFx0c2l6ZVNjYWxlLmRvbWFpbihkMy5leHRlbnQoZ3JhcGgubm9kZXMsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRpZiAoZC5oYXNPd25Qcm9wZXJ0eSgnZmxvdycpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZC5mbG93O1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gWzUsNV1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pKTtcblx0XHRcdFx0Y29uc29sZS5sb2coc2l6ZVNjYWxlLmRvbWFpbigpKTtcblxuXG5cdFx0XHRcdHZhciBub2RlRW50ZXIgPSBub2RlLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuXHRcdFx0XHQvLyAuYXR0cihcInJcIiwgNSlcblx0XHRcdFx0XHQuYXR0cihcImNsYXNzXCIsIFwibm9kZVwiKVxuXHRcdFx0XHRcdC8vIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHQvLyBcdHZhciB0eCA9ICh3aWR0aC8yKSArIGQueDtcblx0XHRcdFx0XHQvLyBcdHZhciB0eSA9IChoZWlnaHQvMikgKyBkLnk7XG5cdFx0XHRcdFx0Ly8gXHRyZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB0eCArIFwiLFwiICsgdHkgKyBcIilcIjtcblx0XHRcdFx0XHQvLyB9KVxuXHRcdFx0XHRcdC5jYWxsKGQzLmRyYWcoKVxuXHRcdFx0XHRcdFx0Lm9uKFwic3RhcnRcIiwgZHJhZ3N0YXJ0ZWQpXG5cdFx0XHRcdFx0XHQub24oXCJkcmFnXCIsIGRyYWdnZWQpXG5cdFx0XHRcdFx0XHQub24oXCJlbmRcIiwgZHJhZ2VuZGVkKSk7XG5cblxuXG5cdFx0XHRcdG5vZGUgPSBub2RlLm1lcmdlKG5vZGVFbnRlcilcblx0XHRcdFx0XHQuYXR0cihcImN4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueCA9ICh3aWR0aC8yKSArIGQueDsgfSlcblx0XHRcdFx0XHQuYXR0cihcImN5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueSA9IChoZWlnaHQvMikgKyBkLnk7IH0pXG5cdFx0XHRcdFx0LmVhY2goZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0aWYgKGQuaGFzT3duUHJvcGVydHkoJ2Zsb3cnKSkge1xuXHRcdFx0XHRcdFx0XHRkLnJhZGl1cyA9IHNpemVTY2FsZShkLmZsb3cpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZC5yYWRpdXMgPSA1O1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoZC5oYXNPd25Qcm9wZXJ0eShcImNsX3RvcFwiKSkge1xuXHRcdFx0XHRcdFx0XHRkLmNvbG9yID0gY29sb3IoZC5jbF90b3ApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZC5jb2xvciA9IGRlZmF1bHRDb2xvcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHR2YXIgbm9kZUNpcmNsZSA9IG5vZGVFbnRlclxuXHRcdFx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjsgfSlcblx0XHRcdFx0XHQuYXBwZW5kKFwiY2lyY2xlXCIpXG5cdFx0XHRcdFx0Ly8gLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSlcblx0XHRcdFx0XHQvLyAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55OyB9KVxuXHRcdFx0XHRcdC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmNvbG9yOyB9KVxuXHRcdFx0XHRcdC5hdHRyKFwiclwiLCAwKTtcblxuXHRcdFx0XHRpZiAodCAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdC8vIG5vZGVFbnRlci5lYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHQvLyBcdGQueCA9IHdpZHRoLzI7XG5cdFx0XHRcdFx0Ly8gXHRkLnkgPSBoZWlnaHQvMjtcblx0XHRcdFx0XHQvLyB9KTtcblx0XHRcdFx0XHRub2RlXG5cdFx0XHRcdFx0XHQuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLnRyYW5zaXRpb24odClcblx0XHRcdFx0XHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkLnJhZGl1cztcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0Ly8gLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY29sb3Jfb3JpZyA9IGNvbG9yKGQuY2xfdG9wKTsgfSk7XG5cdFx0XHRcdFx0XHQuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5jb2xvcjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0bm9kZS5zZWxlY3RBbGwoXCJjaXJjbGVcIilcblx0XHRcdFx0XHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkLnJhZGl1cztcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0Ly8gLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY29sb3Jfb3JpZyA9IGNvbG9yKGQuY2xfdG9wKTsgfSk7XG5cdFx0XHRcdFx0XHQuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5jb2xvcjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGVudGVyTGlua3MobGluaywgdCA9IG51bGwpIHtcblx0XHRcdFx0Ly8gcGFzcyBpbiB0aGUgc2VsZWN0aW9uIGZvciBlbnRlcmluZyBsaW5rc1xuXHRcdFx0XHRcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBsaW5rRW50ZXIgPSBsaW5rLmVudGVyKCkuYXBwZW5kKFwibGluZVwiKVxuXHRcdFx0XHRcdC5hdHRyKFwieDFcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5zb3VyY2UueDsgfSlcblx0XHRcdFx0XHQuYXR0cihcInkxXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc291cmNlLnk7IH0pXG5cdFx0XHRcdFx0LmF0dHIoXCJ4MlwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC54OyB9KVxuXHRcdFx0XHRcdC5hdHRyKFwieTJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50YXJnZXQueTsgfSlcblx0XHRcdFx0XHQuYXR0cihcImNsYXNzXCIsIFwibGlua1wiKTtcblx0XHRcdFx0bGluayA9IGxpbmsubWVyZ2UobGlua0VudGVyKTtcblx0XHRcdFx0bGlua1xuXHRcdFx0XHQgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIE1hdGguc3FydChkLndlaWdodCk7IH0pO1xuXG5cdFx0XHRcdGlmICh0ICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0bGlua0VudGVyXG5cdFx0XHRcdFx0XHQvLyAuc3R5bGUoXCJvcGFjaXR5XCIsIDApXG5cdFx0XHRcdFx0XHQuc3R5bGUoXCJzdHJva2VcIiwgXCJncmVlblwiKVxuXHRcdFx0XHRcdC8vIGxpbmtFbnRlci50cmFuc2l0aW9uKHQpXG5cdFx0XHRcdFx0Ly8gXHQuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbGluaztcblx0XHRcdH1cblxuXHRcdFx0dmFyIGdyYXBoID0gZGF0YTtcblx0XHRcdGNvbnNvbGUubG9nKGdyYXBoKTtcblxuXHRcdFx0Z3JhcGgubm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XG5cdFx0XHRcdGQuaWQgPSBkLmlkLnRvU3RyaW5nKCk7XG5cdFx0XHR9KTtcblx0XHRcdGdyYXBoLmxpbmtzLmZvckVhY2goZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRkLmlkID0gZ2V0TGlua0lkKGQsIGdyYXBoLmRpcmVjdGVkKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR2YXIgc2ltdWxhdGlvbiA9IGQzLmZvcmNlU2ltdWxhdGlvbigpXG5cdFx0XHRcdC5mb3JjZShcImxpbmtcIiwgZDMuZm9yY2VMaW5rKCkuaWQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5pZDsgfSkpXG5cdFx0XHRcdC8vIC5mb3JjZShcImxpbmtcIiwgZDMuZm9yY2VMaW5rKCkpXG5cdFx0XHRcdC5mb3JjZShcImNoYXJnZVwiLCBtYW55Qm9keSlcblx0XHRcdFx0LmZvcmNlKFwiY2VudGVyXCIsIGQzLmZvcmNlQ2VudGVyKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMikpO1xuXG5cdFx0ICBzaW11bGF0aW9uXG5cdFx0XHQgIC5ub2RlcyhncmFwaC5ub2Rlcylcblx0XHRcdCAgLm9uKFwidGlja1wiLCB0aWNrZWQpO1xuXG5cdFx0ICBzaW11bGF0aW9uLmZvcmNlKFwibGlua1wiKVxuXHRcdFx0ICAubGlua3MoZ3JhcGgubGlua3MpO1xuXG5cdFx0XHR2YXIgc2l6ZVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuXHRcdFx0XHQucmFuZ2UoWzQsIDEyXSk7XG5cblxuXHRcdFx0dmFyIGcgPSBzdmcuYXBwZW5kKFwiZ1wiKTtcblxuXHRcdCAgdmFyIGxpbmsgPSBnLmFwcGVuZChcImdcIilcblx0XHRcdCAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtzXCIpXG5cdFx0XHQvLyAuc2VsZWN0QWxsKFwibGluZVwiKVxuXHRcdFx0LnNlbGVjdEFsbChcIi5saW5rXCIpO1xuXG5cdFx0XHRsaW5rID0gbGluay5kYXRhKGdyYXBoLmxpbmtzLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdHJldHVybiBkLmlkO1xuXHRcdFx0fSk7XG5cblx0XHQgIHZhciBub2RlID0gZy5hcHBlbmQoXCJnXCIpXG5cdFx0XHQgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2Rlc1wiKVxuXHRcdFx0LnNlbGVjdEFsbChcIi5ub2RlXCIpO1xuXG5cdFx0XHRub2RlID0gbm9kZS5kYXRhKGdyYXBoLm5vZGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkOyB9KTtcblxuXHRcdFx0bm9kZSA9IGVudGVyTm9kZXMobm9kZSk7XG5cdFx0XHRsaW5rID0gZW50ZXJMaW5rcyhsaW5rKTtcblxuXG5cdFx0XHQvLyBub2RlQ2lyY2xlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdC8vIFx0bm9kZS5jbGFzc2VkKCdmb2N1cycsIGZhbHNlKTtcblx0XHRcdC8vIFx0bm9kZS5zZWxlY3RBbGwoXCJ0ZXh0XCIpLnN0eWxlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cdFx0XHQvLyBcdG5vZGVDaXJjbGUuYXR0cihcImZpbGxcIiwgXCJibGFja1wiKVxuXHRcdFx0Ly8gXHRcdC5zdHlsZShcIm9wYWNpdHlcIiwgLjEpO1xuXHRcdFx0Ly8gXHRsaW5rLnN0eWxlKFwib3BhY2l0eVwiLCAuMSk7XG5cdFx0XHQvLyBcdHZhciBjb21wb25lbnRfaWRzID0gZ3JhcGguZ3JhcGguY29ubmVjdGVkX2NvbXBvbmVudHNbZC5jb21wb25lbnRdO1xuXHRcdFx0Ly8gXHR2YXIgY29tcG9uZW50ID0gbm9kZS5maWx0ZXIoZnVuY3Rpb24oZCkge3JldHVybiBjb21wb25lbnRfaWRzLmluY2x1ZGVzKGQuaWQpOyB9KTtcblx0XHRcdC8vIFx0dmFyIGNvbXBvbmVudExpbmsgPSBsaW5rLmZpbHRlcihmdW5jdGlvbihkKSB7cmV0dXJuIGNvbXBvbmVudF9pZHMuaW5jbHVkZXMoZC5zb3VyY2UuaWQpO30pXG5cdFx0XHQvLyBcdHZhciBjb21wb25lbnRDb2xvciA9IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKTtcblx0XHRcdC8vIFx0Y29tcG9uZW50LmNsYXNzZWQoXCJmb2N1c1wiLCB0cnVlKTtcblx0XHRcdC8vIFx0Y29tcG9uZW50LnNlbGVjdEFsbChcImNpcmNsZVwiKS5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBjb21wb25lbnRDb2xvcihkLmNsX2JvdHRvbSk7IH0pXG5cdFx0XHQvLyBcdFx0LnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcblx0XHRcdC8vIFx0Y29tcG9uZW50LnNlbGVjdEFsbChcInRleHRcIikuc3R5bGUoXCJkaXNwbGF5XCIsIFwiXCIpOyAgLy8gc2hvdyB0aGVzZSBsYWJlbHNcblx0XHRcdC8vIFx0Y29tcG9uZW50TGluay5zdHlsZShcIm9wYWNpdHlcIiwgMSk7XG5cdFx0XHQvLyBcdFxuXHRcdFx0Ly8gXHQkKCAnI25vZGVsYWItZm9ybScgKS5jc3MoICd2aXNpYmlsaXR5JyAsICd2aXNpYmxlJyApO1xuXHRcdFx0Ly8gXHRhcHBseVJhZGlvU2VsZWN0aW9uKCk7XG5cdFx0XHQvL1xuXHRcdFx0Ly8gXHRkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdC8vXG5cdFx0XHQvLyB9KTtcblxuXG5cblx0XHQgIGZ1bmN0aW9uIHRpY2tlZCgpIHtcblx0XHRcdC8vIG5vZGVcblx0XHRcdC8vICAgICAuYXR0cihcImN4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSlcblx0XHRcdC8vICAgICAuYXR0cihcImN5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTsgfSk7XG5cdFx0XHQvLyBhZGQgYm91bmRpbmcgYm94XG5cdFx0XHQvLyAgIGh0dHBzOi8vYmwub2Nrcy5vcmcvbWJvc3RvY2svMTEyOTQ5MlxuXHRcdFx0bm9kZVxuXHRcdFx0XHQuYXR0cihcImN4XCIsIGZ1bmN0aW9uKGQpIHsgXG5cdFx0XHRcdFx0ZC54ID0gTWF0aC5tYXgoZC5yYWRpdXMsIE1hdGgubWluKHdpZHRoIC0gZC5yYWRpdXMsIGQueCkpO1xuXHRcdFx0XHRcdHJldHVybiBkLng7IH0pXG5cdFx0XHRcdC5hdHRyKFwiY3lcIiwgZnVuY3Rpb24oZCkgeyBcblx0XHRcdFx0XHRkLnkgPSBNYXRoLm1heChkLnJhZGl1cywgTWF0aC5taW4od2lkdGggLSBkLnJhZGl1cywgZC55KSk7XG5cdFx0XHRcdFx0cmV0dXJuIGQueTsgfSlcblx0XHRcdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiOyB9KTtcblxuXHRcdFx0bGlua1xuXHRcdFx0XHQvLyAuc2VsZWN0QWxsKFwibGluZVwiKVxuXHRcdFx0XHQuYXR0cihcIngxXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc291cmNlLng7IH0pXG5cdFx0XHRcdC5hdHRyKFwieTFcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5zb3VyY2UueTsgfSlcblx0XHRcdFx0LmF0dHIoXCJ4MlwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC54OyB9KVxuXHRcdFx0XHQuYXR0cihcInkyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudGFyZ2V0Lnk7IH0pO1xuXHRcdCAgfVxuXG5cdFx0XHRmdW5jdGlvbiByZXNldF9sYXlvdXQoKSB7XG5cdFx0XHRcdG5vZGUuY2xhc3NlZChcImZvY3VzXCIsIGZhbHNlKTtcblx0XHRcdFx0bm9kZS5zZWxlY3RBbGwoXCJ0ZXh0XCIpLnN0eWxlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cdFx0XHRcdC8vIG5vZGVDaXJjbGUuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jb2xvcl9vcmlnOyB9KVxuXHRcdFx0XHQvLyBcdC5zdHlsZShcIm9wYWNpdHlcIiwgMSk7XG5cdFx0XHRcdGxpbmsuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuXHRcdFx0XHQkKCAnI25vZGVsYWItZm9ybScgKS5jc3MoICd2aXNpYmlsaXR5JyAsICdoaWRkZW4nICk7XG5cdFx0XHR9XG5cdFx0XHRzdmcub24oXCJjbGlja1wiLCByZXNldF9sYXlvdXQpO1xuXG5cdFx0XHQvLyBUT0RPIHRoaXMgaXMgYnJva2VuLiBmaXggaXQuXG5cdFx0XHQvLyB2YXIgZnVzZSA9IG5ldyBGdXNlKGdyYXBoLm5vZGVzLCBmdXNlT3B0aW9ucyk7XG5cdFx0XHQvLyB2YXIgcmVzdWx0ID0gZnVzZS5zZWFyY2goXCJlaGxvd1wiKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cdFx0XHQvLyAkKCAnI3RleHRTZWFyY2gnICkub24oICdpbnB1dCcsIGZ1c2VTZWxlY3QgKTtcblx0XHRcdC8vIGZ1bmN0aW9uIGZ1c2VTZWxlY3QoKSB7XG5cdFx0XHQvLyBcdC8vIHJlc2V0IG5vZGUgc2l6ZXMgYW5kIHN0eWxlc1xuXHRcdFx0Ly8gXHRkMy5zZWxlY3RBbGwoXCIubm9kZSBjaXJjbGVcIilcblx0XHRcdC8vIFx0XHQuc3R5bGUoXCJzdHJva2Utd2lkdGhcIiwgMSlcblx0XHRcdC8vIFx0XHQuc3R5bGUoXCJzdHJva2VcIiwgXCJ3aGl0ZVwiKVxuXHRcdFx0Ly8gXHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnJhZGl1czsgfSk7XG4gICAgICAgICAgICAvL1xuXHRcdFx0Ly8gXHR2YXIgJHRoaXMgPSAkKCB0aGlzICk7XG5cdFx0XHQvLyBcdHZhciBxdWVyeSA9ICR0aGlzLnZhbCgpO1xuXHRcdFx0Ly8gXHRjb25zb2xlLmxvZygkdGhpcy52YWwoKSk7XG5cdFx0XHQvLyBcdGlmIChxdWVyeS5sZW5ndGggPiAzKSB7XG5cdFx0XHQvLyBcdFx0dmFyIHJlc3VsdCA9IGZ1c2Uuc2VhcmNoKHF1ZXJ5KTtcblx0XHRcdC8vIFx0XHRpZiAocmVzdWx0Lmxlbmd0aCAhPTApIHtcblx0XHRcdC8vIFx0XHRcdGZvciAodmFyIGkgPSAwLCBsZW4gPSByZXN1bHQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdC8vIFx0XHRcdFx0dmFyIGF1dGhvcklkID0gcmVzdWx0W2ldO1xuXHRcdFx0Ly8gXHRcdFx0XHRub2RlLmZpbHRlcihmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkID09IGF1dGhvcklkOyB9KVxuXHRcdFx0Ly8gXHRcdFx0XHRcdC5zZWxlY3QoXCJjaXJjbGVcIilcblx0XHRcdC8vIFx0XHRcdFx0XHQuc3R5bGUoXCJzdHJva2Utd2lkdGhcIiwgMilcblx0XHRcdC8vIFx0XHRcdFx0XHQuc3R5bGUoXCJzdHJva2VcIiwgXCJibGFja1wiKVxuXHRcdFx0Ly8gXHRcdFx0XHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnJhZGl1cyAqIDEuNTsgfSk7XG5cdFx0XHQvLyBcdFx0XHR9XG5cdFx0XHQvLyBcdFx0fVxuXHRcdFx0Ly8gXHR9XG5cdFx0XHQvLyB9XG5cblx0XHRcdHVwZGF0ZVdpZHRoID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIHVzZSB3aWR0aCB0byBtYWtlIGFueSBjaGFuZ2VzXG5cdFx0XHRcdC8vXG5cdFx0XHRcdC8vIE5PVCBJTVBMRU1FTlRFRFxuXHRcdFx0fTtcblxuXHRcdFx0dXBkYXRlRGF0YSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvLyB1c2UgRDMgdXBkYXRlIHBhdHRlcm4gd2l0aCBkYXRhXG5cblx0XHRcdFx0Z3JhcGggPSBkYXRhO1xuXHRcdFx0XHRncmFwaC5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRkLmlkID0gZC5pZC50b1N0cmluZygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHRncmFwaC5saW5rcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRkLmlkID0gZ2V0TGlua0lkKGQsIGdyYXBoLmRpcmVjdGVkKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNpbXVsYXRpb25cblx0XHRcdFx0XHQubm9kZXMoZ3JhcGgubm9kZXMpXG5cdFx0XHRcdFx0Lm9uKFwidGlja1wiLCB0aWNrZWQpO1xuXG5cdFx0XHRcdHNpbXVsYXRpb24uZm9yY2UoXCJsaW5rXCIpXG5cdFx0XHRcdFx0LmxpbmtzKGdyYXBoLmxpbmtzKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZ3JhcGgpO1xuXHRcdFx0XHRzaW11bGF0aW9uLnN0b3AoKTtcblx0XHRcdFx0bm9kZSA9IG5vZGUuZGF0YShncmFwaC5ub2RlcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5pZDsgfSk7XG5cdFx0XHRcdHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpO1xuXHRcdFx0XHQvLyBub2RlRXhpdC5zZWxlY3RBbGwoXCJjaXJjbGVcIikuYXR0cihcImZpbGxcIiwgXCJyZWRcIik7XG5cdFx0XHRcdHZhciB0ID0gZDMudHJhbnNpdGlvbigndXBkYXRlRGF0YScpLmR1cmF0aW9uKDUwMDApO1xuXHRcdFx0XHRub2RlRXhpdC5zZWxlY3RBbGwoXCJjaXJjbGVcIikuc3R5bGUoXCJzdHJva2VcIiwgXCJyZWRcIikudHJhbnNpdGlvbih0KS5hdHRyKFwiclwiLCAwKTtcblx0XHRcdFx0bm9kZSA9IGVudGVyTm9kZXMobm9kZSwgdCk7XG5cdFx0XHRcdC8vIG5vZGUgPSBub2RlLmNhbGwoZW50ZXJOb2RlcywgdCk7XG5cblxuXG5cdFx0XHRcdGxpbmsgPSBsaW5rXG5cdFx0XHRcdFx0LmRhdGEoZ3JhcGgubGlua3MsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdC8vIGQuaWQgPSBnZXRMaW5rSWQoZCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZC5pZDtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0dmFyIGxpbmtFeGl0ID0gbGluay5leGl0KCk7XG5cdFx0XHRcdGxpbmtFeGl0LnN0eWxlKFwic3Ryb2tlXCIsIFwicmVkXCIpLnRyYW5zaXRpb24odCkuc3R5bGUoXCJvcGFjaXR5XCIsIDApLnJlbW92ZSgpO1xuXHRcdFx0XHQvLyBsaW5rRXhpdC5yZW1vdmUoKTtcblx0XHRcdFx0bGluayA9IGVudGVyTGlua3MobGluaywgdCk7XG5cdFx0XHRcdHNpbXVsYXRpb24ub24oXCJ0aWNrXCIpLmNhbGwoKTtcblxuXG5cdFx0XHRcdHQuZW5kKCkudGhlbihmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0bm9kZUV4aXQucmVtb3ZlKCk7XG5cdFx0XHRcdFx0Ly8gc2ltdWxhdGlvbi5hbHBoYSgxKS5yZXN0YXJ0KCk7XG5cdFx0XHRcdFx0Ly8gc2ltdWxhdGlvblxuXHRcdFx0XHRcdFx0Ly8gLmFscGhhRGVjYXkoLjAwMDUpXG5cdFx0XHRcdFx0XHQvLyAudmVsb2NpdHlEZWNheSgwLjkpXG5cdFx0XHRcdFx0XHQvLyAuYWxwaGEoLjEpXG5cdFx0XHRcdFx0XHQvLyAucmVzdGFydCgpO1xuXHRcdFx0XHRjb25zb2xlLmxvZygnZGRkZCcpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3Nzc3MnKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIH0sIDQwMDApO1xuXHRcdFx0fVxuXG5cblxuXHRcdH0pO1xuXG5cdH1cblx0Y2hhcnQuZGF0YSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0aWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZGF0YTtcblx0XHRkYXRhID0gdmFsdWU7XG5cdFx0Y29uc29sZS5sb2codHlwZW9mIHVwZGF0ZURhdGEpO1xuXHRcdGlmICh0eXBlb2YgdXBkYXRlRGF0YSA9PT0gJ2Z1bmN0aW9uJykgdXBkYXRlRGF0YSgpO1xuXHRcdHJldHVybiBjaGFydDtcblx0fTtcblxuXHRjaGFydC53aWR0aCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0aWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gd2lkdGg7XG5cdFx0d2lkdGggPSB2YWx1ZTtcblx0XHRpZiAodHlwZW9mIHVwZGF0ZVdpZHRoID09PSAnZnVuY3Rpb24nKSB1cGRhdGVXaWR0aCgpO1xuXHRcdHJldHVybiBjaGFydDtcblx0fTtcblxuXHRyZXR1cm4gY2hhcnQ7XG5cdFxufVxuXG5cblxuXG4iLCJpbXBvcnQgdGlwcHkgZnJvbSAndGlwcHkuanMnO1xuLy8gY29uc3QgdGlwcHkgPSByZXF1aXJlKCcuLi9ub2RlX21vZHVsZXMvdGlwcHkuanMvJyk7XG5jb25zb2xlLmxvZyh0aXBweSk7XG5pbXBvcnQgJ3RpcHB5LmpzL3RoZW1lcy9saWdodC1ib3JkZXIuY3NzJztcblxuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IGpRdWVyeSBmcm9tICdqcXVlcnknO1xuY29uc3QgJCA9IGpRdWVyeTtcblxuZXhwb3J0IGRlZmF1bHQgYWN0aXZhdGVUb29sdGlwcztcblxudGlwcHkuc2V0RGVmYXVsdHMoe1xuXHQndGhlbWUnOiAnbGlnaHQtYm9yZGVyJyxcblx0J2FuaW1hdGVGaWxsJzogZmFsc2UsXG5cdCdhbmltYXRpb24nOiAnZmFkZScsXG59KTtcbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rvb2x0aXAtdGVtcGxhdGUnKTtcblxuZnVuY3Rpb24gYWN0aXZhdGVUb29sdGlwcygpIHtcblx0Y29uc29sZS5sb2coJ2FjdGl2YXRlVG9vbHRpcHMoKScpO1xuXG5cdGZ1bmN0aW9uIGZpbGxIdG1sKCR0ZW1wbGF0ZSwgY2xhc3NuYW1lLCB0ZXh0Q29udGVudCkge1xuXHRcdCR0ZW1wbGF0ZS5maW5kKCAnLicgKyBjbGFzc25hbWUgKS5maW5kKCAnLnRlbXBsYXRlLWNvbnRlbnQnICkudGV4dCh0ZXh0Q29udGVudCk7XG5cdH1cblxuXHRkMy5zZWxlY3RBbGwoJy5ub2RlIGNpcmNsZScpLmVhY2goZnVuY3Rpb24oZCkge1xuXHRcdHZhciAkdG9vbHRpcE5vZGUgPSAkKHRlbXBsYXRlKS5jbG9uZSgpLmF0dHIoXCJpZFwiLCBudWxsKTtcblx0XHRpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShcIl90aXBweVwiKSkge1xuXHRcdFx0dmFyIHRpcHB5SW5zdGFuY2UgPSB0aGlzLl90aXBweTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHRpcHB5SW5zdGFuY2UgPSB0aXBweSh0aGlzKTtcblx0XHR9XG5cdFx0ZmlsbEh0bWwoJHRvb2x0aXBOb2RlLCAnYXV0aG9yX25hbWUnLCBkLmF1dGhvcl9uYW1lKTtcblx0XHRmaWxsSHRtbCgkdG9vbHRpcE5vZGUsICdhZmZpbF9uYW1lJywgZC5hZmZpbF9uYW1lKTtcblx0XHRpZiAoZC5oYXNPd25Qcm9wZXJ0eSgnY2xfYm90dG9tJykpIGZpbGxIdG1sKCR0b29sdGlwTm9kZSwgJ2NsdXN0ZXJfaWQnLCBkLmNsX2JvdHRvbSk7XG5cdFx0dmFyICRwYXBlclRpdGxlcyA9ICR0b29sdGlwTm9kZS5maW5kKCAnLnBhcGVyX3RpdGxlcycgKS5maW5kKCAnLnRlbXBsYXRlLWNvbnRlbnQnICk7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIGxlbiA9IGQucGFwZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHR2YXIgJGxpc3RJdGVtID0gJCggJzxsaSBjbGFzcz1cInBhcGVyX3RpdGxlXCI+JyApLnRleHQoZC5wYXBlcnNbaV0udGl0bGUpO1xuXHRcdFx0JHBhcGVyVGl0bGVzLmFwcGVuZCggJGxpc3RJdGVtICk7XG5cdFx0fVxuXHRcdHRpcHB5SW5zdGFuY2Uuc2V0Q29udGVudCgkdG9vbHRpcE5vZGUuaHRtbCgpKTtcblx0fSk7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzVfXzsiXSwic291cmNlUm9vdCI6IiJ9