!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3"),require("jQuery"),require("tippy.js")):"function"==typeof define&&define.amd?define("nodelink_vis_coauthorship",["d3","jQuery","tippy.js"],e):"object"==typeof exports?exports.nodelink_vis_coauthorship=e(require("d3"),require("jQuery"),require("tippy.js")):t.nodelink_vis_coauthorship=e(t.d3,t.jQuery,t.tippy)}("undefined"!=typeof self?self:this,function(t,e,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NodeLinkCoauthorshipVis",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"activateTooltips",{enumerable:!0,get:function(){return i.default}});var r=o(n(3)),i=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0));function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=((r=n(1))&&r.__esModule?r:{default:r}).default,u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n={el:null,data:null,width:960,color:i.scaleOrdinal(i.schemeCategory10),forceStrength:-2};Object.assign(this,n,e),this._data=this.data,this.data=this.updateData,void 0===this.height&&(this.height=.625*this.width),this.manyBody=i.forceManyBody().strength(this.forceStrength),this.init=!1,console.log(this._data),null!==this.el&&null!==this._data&&(this.draw(this.el),this.init=!0)}var e,n,r;return e=t,(n=[{key:"getLinkId",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[t.source.toString(),t.target.toString()];return!0===e&&n.sort(),n[0]+"-&-"+n[1]}},{key:"updateData",value:function(t){return arguments.length?(this._data=t,!1===this.init?(this.draw(this.el),this.init=!0):console.log("UPDATING DATA NOT YET IMPLEMENTED"),this):this._data}},{key:"draw",value:function(t){var e=this.width,n=this.height,r=this._data,o=this.manyBody,u=this.color,l=this.getLinkId;return t.each(function(){var t=i.select(this).append("svg").attr("width",e).attr("height",n);function c(t){i.event.active||d.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function s(t){t.fx=i.event.x,t.fy=i.event.y}function f(t){i.event.active||d.alphaTarget(0),t.fx=null,t.fy=null}console.log(r),r.nodes.forEach(function(t){t.id=t.id.toString()}),r.links.forEach(function(t){t.id=l(t,r.directed)});var d=i.forceSimulation().force("link",i.forceLink().id(function(t){return t.id})).force("charge",o).force("center",i.forceCenter(e/2,n/2));d.nodes(r.nodes).on("tick",function(){v.attr("cx",function(t){return t.x=Math.max(t.radius,Math.min(e-t.radius,t.x)),t.x}).attr("cy",function(t){return t.y=Math.max(t.radius,Math.min(e-t.radius,t.y)),t.y}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),y.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y})}),d.force("link").links(r.links),this.simulation=d;var p=i.scaleLinear().range([4,12]),h=t.append("g"),y=h.append("g").attr("class","links").selectAll(".link");y=y.data(r.links,function(t){return t.id});var v=h.append("g").attr("class","nodes").selectAll(".node");v=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=u(0);p.domain(i.extent(r.nodes,function(t){return t.hasOwnProperty("flow")?t.flow:[5,5]})),console.log(p.domain());var l=t.enter().append("g").attr("class","node").call(i.drag().on("start",c).on("drag",s).on("end",f));return t=t.merge(l).attr("cx",function(t){return t.x=e/2+t.x}).attr("cy",function(t){return t.y=n/2+t.y}).each(function(t){t.hasOwnProperty("flow")?t.radius=p(t.flow):t.radius=5,t.hasOwnProperty("cl_top")?t.color=u(t.cl_top):t.color=a}),l.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).append("circle").attr("fill",function(t){return t.color}).attr("r",0),null!==o?t.selectAll("circle").transition(o).attr("r",function(t){return t.radius}).attr("fill",function(t){return t.color}):t.selectAll("circle").attr("r",function(t){return t.radius}).attr("fill",function(t){return t.color}),t}(v=v.data(r.nodes,function(t){return t.id})),y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.enter().append("line").attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}).attr("class","link");return(t=t.merge(n)).attr("stroke-width",function(t){return Math.sqrt(t.weight)}),null!==e&&n.style("stroke","green"),t}(y),t.on("click",function(){v.classed("focus",!1),v.selectAll("text").style("display","none"),y.style("opacity",1),a("#nodelab-form").css("visibility","hidden")})}),this}}])&&o(e.prototype,n),r&&o(e,r),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(5));n(6);var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0));function o(t){return t&&t.__esModule?t:{default:t}}var a=o(n(1)).default,u=function(){function t(t,e,n){t.find("."+e).find(".template-content").text(n)}console.log("activateTooltips()"),i.selectAll(".node circle").each(function(e){var n=a(l).clone().attr("id",null);if(this.hasOwnProperty("_tippy"))var o=this._tippy;else var o=(0,r.default)(this);t(n,"author_name",e.author_name),e.hasOwnProperty("affil_name")&&e.affil_name.length?t(n,"affil_name",e.affil_name):n.find(".affil_name").hide();var u=n.find(".paper_titles").find(".template-content"),c=e.papers;c.sort(function(t,e){return i.ascending(t.title,e.title)});for(var s=0,f=c.length;s<f;s++){var d=a('<li class="paper_title">').text(c[s].title);u.append(d)}o.setContent(n.html())})};e.default=u,r.default.setDefaults({theme:"light-border",animateFill:!1,animation:"fade"});var l=document.getElementById("tooltip-template");t.exports=e.default},function(t,e){t.exports=n},function(t,e){}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub2RlbGlua192aXNfY29hdXRob3JzaGlwL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9ub2RlbGlua192aXNfY29hdXRob3JzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL25vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXAvZXh0ZXJuYWwgXCJkM1wiIiwid2VicGFjazovL25vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXAvZXh0ZXJuYWwgXCJqUXVlcnlcIiIsIndlYnBhY2s6Ly9ub2RlbGlua192aXNfY29hdXRob3JzaGlwLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL25vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXAvLi9zcmMvdmlzLmpzIiwid2VicGFjazovL25vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXAvLi9zcmMvY29hdXRob3JzaGlwX3Rvb2x0aXBzLmpzIiwid2VicGFjazovL25vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXAvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcInRpcHB5LmpzXCIsXCJjb21tb25qczJcIjpcInRpcHB5LmpzXCIsXCJhbWRcIjpcInRpcHB5LmpzXCIsXCJyb290XCI6XCJ0aXBweVwifSJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181X18iLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX3ZpcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY29hdXRob3JzaGlwX3Rvb2x0aXBzIiwiZDMiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIiQiLCJkZWZhdWx0IiwiTm9kZUxpbmtDb2F1dGhvcnNoaXBWaXMiLCJvcHRzIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX2NsYXNzQ2FsbENoZWNrIiwiZGVmYXVsdHMiLCJlbCIsImRhdGEiLCJ3aWR0aCIsImNvbG9yIiwic2NhbGVPcmRpbmFsIiwic2NoZW1lQ2F0ZWdvcnkxMCIsImZvcmNlU3RyZW5ndGgiLCJhc3NpZ24iLCJfZGF0YSIsInVwZGF0ZURhdGEiLCJoZWlnaHQiLCJtYW55Qm9keSIsImZvcmNlTWFueUJvZHkiLCJzdHJlbmd0aCIsImluaXQiLCJjb25zb2xlIiwibG9nIiwiZHJhdyIsImxpbmsiLCJkaXJlY3RlZCIsIml0ZW1zIiwic291cmNlIiwidG9TdHJpbmciLCJ0YXJnZXQiLCJzb3J0Iiwic2VsZWN0aW9uIiwiZ3JhcGgiLCJnZXRMaW5rSWQiLCJlYWNoIiwic3ZnIiwic2VsZWN0IiwiYXBwZW5kIiwiYXR0ciIsImRyYWdzdGFydGVkIiwiZXZlbnQiLCJhY3RpdmUiLCJzaW11bGF0aW9uIiwiYWxwaGFUYXJnZXQiLCJyZXN0YXJ0IiwiZngiLCJ4IiwiZnkiLCJ5IiwiZHJhZ2dlZCIsImRyYWdlbmRlZCIsIm5vZGVzIiwiZm9yRWFjaCIsImlkIiwibGlua3MiLCJmb3JjZVNpbXVsYXRpb24iLCJmb3JjZSIsImZvcmNlTGluayIsImZvcmNlQ2VudGVyIiwib24iLCJub2RlIiwiTWF0aCIsIm1heCIsInJhZGl1cyIsIm1pbiIsInNpemVTY2FsZSIsInNjYWxlTGluZWFyIiwicmFuZ2UiLCJnIiwic2VsZWN0QWxsIiwiZGVmYXVsdENvbG9yIiwiZG9tYWluIiwiZXh0ZW50IiwiZmxvdyIsIm5vZGVFbnRlciIsImVudGVyIiwiZHJhZyIsIm1lcmdlIiwiY2xfdG9wIiwidHJhbnNpdGlvbiIsImVudGVyTm9kZXMiLCJsaW5rRW50ZXIiLCJzcXJ0Iiwid2VpZ2h0Iiwic3R5bGUiLCJlbnRlckxpbmtzIiwiY2xhc3NlZCIsImNzcyIsIl90aXBweSIsImZpbGxIdG1sIiwiJHRlbXBsYXRlIiwiY2xhc3NuYW1lIiwidGV4dENvbnRlbnQiLCJmaW5kIiwidGV4dCIsIiR0b29sdGlwTm9kZSIsInRlbXBsYXRlIiwiY2xvbmUiLCJ0aXBweUluc3RhbmNlIiwiYXV0aG9yX25hbWUiLCJhZmZpbF9uYW1lIiwiaGlkZSIsIiRwYXBlclRpdGxlcyIsInBhcGVycyIsImEiLCJiIiwiYXNjZW5kaW5nIiwidGl0bGUiLCJsZW4iLCIkbGlzdEl0ZW0iLCJzZXRDb250ZW50IiwiaHRtbCIsInNldERlZmF1bHRzIiwidGhlbWUiLCJhbmltYXRlRmlsbCIsImFuaW1hdGlvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELEVBQUFHLFFBQUEsTUFBQUEsUUFBQSxVQUFBQSxRQUFBLGFBQ0EsbUJBQUFDLGVBQUFDLElBQ0FELE9BQUEsdURBQUFKLEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsMEJBQUFELEVBQUFHLFFBQUEsTUFBQUEsUUFBQSxVQUFBQSxRQUFBLGFBRUFKLEVBQUEsMEJBQUFDLEVBQUFELEVBQUEsR0FBQUEsRUFBQSxPQUFBQSxFQUFBLE9BUkEsQ0FTQyxvQkFBQU8sVUFBQUMsS0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNELG1CQ1RBLElBQUFDLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdB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NUQsSUFBSyxJQUFJbkosRUFBSSxFQUFHb0osRUFBTUwsRUFBT3JHLE9BQVExQyxFQUFJb0osRUFBS3BKLElBQUssQ0FDbEQsSUFBSXFKLEVBQVloSCxFQUFHLDRCQUE2QmlHLEtBQUtTLEVBQU8vSSxHQUFHbUosT0FDL0RMLEVBQWFqRSxPQUFRd0UsR0FFdEJYLEVBQWNZLFdBQVdmLEVBQWFnQix1QkFwQ3hDdkIsRUFBQTFGLFFBQU1rSCxZQUFZLENBQ2pCQyxNQUFTLGVBQ1RDLGFBQWUsRUFDZkMsVUFBYSxTQUVkLElBQU1uQixFQUFXb0IsU0FBU0MsZUFBZSx1RENmekN6SyxFQUFBRCxRQUFBUyIsImZpbGUiOiJub2RlbGlua192aXNfY29hdXRob3JzaGlwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImQzXCIpLCByZXF1aXJlKFwialF1ZXJ5XCIpLCByZXF1aXJlKFwidGlwcHkuanNcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJub2RlbGlua192aXNfY29hdXRob3JzaGlwXCIsIFtcImQzXCIsIFwialF1ZXJ5XCIsIFwidGlwcHkuanNcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibm9kZWxpbmtfdmlzX2NvYXV0aG9yc2hpcFwiXSA9IGZhY3RvcnkocmVxdWlyZShcImQzXCIpLCByZXF1aXJlKFwialF1ZXJ5XCIpLCByZXF1aXJlKFwidGlwcHkuanNcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIm5vZGVsaW5rX3Zpc19jb2F1dGhvcnNoaXBcIl0gPSBmYWN0b3J5KHJvb3RbXCJkM1wiXSwgcm9vdFtcImpRdWVyeVwiXSwgcm9vdFtcInRpcHB5XCJdKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNV9fKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX187IiwiaW1wb3J0IE5vZGVMaW5rQ29hdXRob3JzaGlwVmlzIGZyb20gJy4vdmlzLmpzJztcbmltcG9ydCBhY3RpdmF0ZVRvb2x0aXBzIGZyb20gJy4vY29hdXRob3JzaGlwX3Rvb2x0aXBzLmpzJztcbmV4cG9ydCB7IE5vZGVMaW5rQ29hdXRob3JzaGlwVmlzLCBhY3RpdmF0ZVRvb2x0aXBzIH07XG5cbiIsIi8vIE5vZGVMaW5rQ29hdXRob3JzaGlwVmlzXG5cbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBqUXVlcnkgZnJvbSAnanF1ZXJ5JztcbmNvbnN0ICQgPSBqUXVlcnk7XG5cblxuXG4vLyByZXVzYWJsZSBjaGFydCBwYXR0ZXJuIGluc3BpcmVkIGJ5OlxuLy8gaHR0cHM6Ly9ib3N0Lm9ja3Mub3JnL21pa2UvY2hhcnQvXG4vLyBhbmRcbi8vIGh0dHBzOi8vd3d3LnRvcHRhbC5jb20vZDMtanMvdG93YXJkcy1yZXVzYWJsZS1kMy1qcy1jaGFydHNcbmNsYXNzIE5vZGVMaW5rQ29hdXRob3JzaGlwVmlzIHtcblx0Y29uc3RydWN0b3Iob3B0cyA9IHt9KSB7XG5cdFx0Y29uc3QgZGVmYXVsdHMgPSB7XG5cdFx0XHRlbDogbnVsbCxcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHR3aWR0aDogOTYwLFxuXHRcdFx0Y29sb3I6IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKSxcblx0XHRcdGZvcmNlU3RyZW5ndGg6IC0yLFxuXHRcdH07XG5cdFx0T2JqZWN0LmFzc2lnbih0aGlzLCBkZWZhdWx0cywgb3B0cyk7ICAvLyBvcHRzIHdpbGwgb3ZlcndyaXRlIGRlZmF1bHRzXG5cdFx0dGhpcy5fZGF0YSA9IHRoaXMuZGF0YTtcblx0XHR0aGlzLmRhdGEgPSB0aGlzLnVwZGF0ZURhdGE7XG5cdFx0aWYgKHR5cGVvZiB0aGlzLmhlaWdodCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRoaXMuaGVpZ2h0ID0gLjYyNSAqIHRoaXMud2lkdGg7XG5cdFx0fVxuXHRcdHRoaXMubWFueUJvZHkgPSBkMy5mb3JjZU1hbnlCb2R5KClcblx0XHRcdFx0XHRcdFx0LnN0cmVuZ3RoKHRoaXMuZm9yY2VTdHJlbmd0aCk7XG5cdFx0dGhpcy5pbml0ID0gZmFsc2U7XG5cdFx0Y29uc29sZS5sb2codGhpcy5fZGF0YSk7XG5cdFx0aWYgKHRoaXMuZWwgIT09IG51bGwgJiYgdGhpcy5fZGF0YSAhPT0gbnVsbCkge1xuXHRcdFx0dGhpcy5kcmF3KHRoaXMuZWwpO1xuXHRcdFx0dGhpcy5pbml0ID0gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHRnZXRMaW5rSWQobGluaywgZGlyZWN0ZWQgPSBmYWxzZSkge1xuXHRcdC8vIGxpbmsgSUQgd2lsbCBiZSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGUgc291cmNlIElEIGFuZCB0YXJnZXQgSUQsIHNlcGFyYXRlZCBieSBcIi0mLVwiXG5cdFx0Ly8gSWYgdGhlIGdyYXBoIGlzIHVuZGlyZWN0ZWQsIHRoZSBJRHMgd2lsbCBiZSBzb3J0ZWQgQUxQSEFCRVRJQ0FMTFkgdXNpbmcgdGhlIHN0cmluZyB2YWx1ZXMgb2YgdGhlIElEXG5cdFx0dmFyIHNvdXJjZSA9IGxpbmsuc291cmNlLnRvU3RyaW5nKCk7XG5cdFx0dmFyIHRhcmdldCA9IGxpbmsudGFyZ2V0LnRvU3RyaW5nKCk7XG5cdFx0dmFyIGl0ZW1zID0gW3NvdXJjZSwgdGFyZ2V0XTtcblx0XHR2YXIgc2VwID0gXCItJi1cIjtcblx0XHRpZiAoZGlyZWN0ZWQgPT09IHRydWUpIHtcblx0XHRcdGl0ZW1zLnNvcnQoKTtcblx0XHR9XG5cdFx0cmV0dXJuIGl0ZW1zWzBdICsgc2VwICsgaXRlbXNbMV07XG5cdH1cblxuXHR1cGRhdGVEYXRhKHZhbHVlKSB7XG5cdFx0aWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fZGF0YTtcblx0XHR0aGlzLl9kYXRhID0gdmFsdWU7XG5cdFx0aWYgKHRoaXMuaW5pdCA9PT0gZmFsc2UpIHtcblx0XHRcdHRoaXMuZHJhdyh0aGlzLmVsKTtcblx0XHRcdHRoaXMuaW5pdCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHRoaXMudXBkYXRlRGF0YSgpO1xuXHRcdFx0Ly8gTk9UIElNUExFTUVOVEVEXG5cdFx0XHRjb25zb2xlLmxvZyhcIlVQREFUSU5HIERBVEEgTk9UIFlFVCBJTVBMRU1FTlRFRFwiKTtcblx0XHR9XG5cdFx0Ly8gY29uc29sZS5sb2codHlwZW9mIHVwZGF0ZURhdGEpO1xuXHRcdC8vIGlmICh0eXBlb2YgdXBkYXRlRGF0YSA9PT0gJ2Z1bmN0aW9uJykgdXBkYXRlRGF0YSgpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdGRyYXcoc2VsZWN0aW9uKSB7XG5cdFx0dmFyIG9iaiA9IHRoaXM7XG5cdFx0dmFyIHdpZHRoID0gdGhpcy53aWR0aDtcblx0XHR2YXIgaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cdFx0dmFyIGdyYXBoID0gdGhpcy5fZGF0YTtcblx0XHR2YXIgbWFueUJvZHkgPSB0aGlzLm1hbnlCb2R5O1xuXHRcdHZhciBjb2xvciA9IHRoaXMuY29sb3I7XG5cdFx0dmFyIGdldExpbmtJZCA9IHRoaXMuZ2V0TGlua0lkO1xuXHRcdHNlbGVjdGlvbi5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbEl0ZW0gPSB0aGlzO1xuXG5cdFx0XHR2YXIgc3ZnID0gZDMuc2VsZWN0KHNlbEl0ZW0pLmFwcGVuZChcInN2Z1wiKS5hdHRyKFwid2lkdGhcIiwgd2lkdGgpLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KTtcblx0XHRcdGNvbnNvbGUubG9nKGdyYXBoKTtcblxuXHRcdFx0ZnVuY3Rpb24gZHJhZ3N0YXJ0ZWQoZCkge1xuXHRcdFx0XHRpZiAoIWQzLmV2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwLjMpLnJlc3RhcnQoKTtcblx0XHRcdFx0ZC5meCA9IGQueDtcblx0XHRcdFx0ZC5meSA9IGQueTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZHJhZ2dlZChkKSB7XG5cdFx0XHRcdGQuZnggPSBkMy5ldmVudC54O1xuXHRcdFx0XHRkLmZ5ID0gZDMuZXZlbnQueTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZHJhZ2VuZGVkKGQpIHtcblx0XHRcdFx0aWYgKCFkMy5ldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMCk7XG5cdFx0XHRcdGQuZnggPSBudWxsO1xuXHRcdFx0XHRkLmZ5ID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZW50ZXJOb2Rlcyhub2RlLCB0ID0gbnVsbCkge1xuXHRcdFx0XHQvLyBwYXNzIGluIHRoZSBzZWxlY3Rpb24gZm9yIGVudGVyaW5nIG5vZGVzXG5cblx0XHRcdFx0dmFyIGRlZmF1bHRDb2xvciA9IGNvbG9yKDApO1xuXG5cdFx0XHRcdHNpemVTY2FsZS5kb21haW4oZDMuZXh0ZW50KGdyYXBoLm5vZGVzLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0aWYgKGQuaGFzT3duUHJvcGVydHkoJ2Zsb3cnKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGQuZmxvdztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFs1LDVdXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHNpemVTY2FsZS5kb21haW4oKSk7XG5cblxuXHRcdFx0XHR2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcImdcIilcblx0XHRcdFx0Ly8gLmF0dHIoXCJyXCIsIDUpXG5cdFx0XHRcdFx0LmF0dHIoXCJjbGFzc1wiLCBcIm5vZGVcIilcblx0XHRcdFx0XHQvLyAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0Ly8gXHR2YXIgdHggPSAod2lkdGgvMikgKyBkLng7XG5cdFx0XHRcdFx0Ly8gXHR2YXIgdHkgPSAoaGVpZ2h0LzIpICsgZC55O1xuXHRcdFx0XHRcdC8vIFx0cmV0dXJuIFwidHJhbnNsYXRlKFwiICsgdHggKyBcIixcIiArIHR5ICsgXCIpXCI7XG5cdFx0XHRcdFx0Ly8gfSlcblx0XHRcdFx0XHQuY2FsbChkMy5kcmFnKClcblx0XHRcdFx0XHRcdC5vbihcInN0YXJ0XCIsIGRyYWdzdGFydGVkKVxuXHRcdFx0XHRcdFx0Lm9uKFwiZHJhZ1wiLCBkcmFnZ2VkKVxuXHRcdFx0XHRcdFx0Lm9uKFwiZW5kXCIsIGRyYWdlbmRlZCkpO1xuXG5cblxuXHRcdFx0XHRub2RlID0gbm9kZS5tZXJnZShub2RlRW50ZXIpXG5cdFx0XHRcdFx0LmF0dHIoXCJjeFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnggPSAod2lkdGgvMikgKyBkLng7IH0pXG5cdFx0XHRcdFx0LmF0dHIoXCJjeVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnkgPSAoaGVpZ2h0LzIpICsgZC55OyB9KVxuXHRcdFx0XHRcdC5lYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdGlmIChkLmhhc093blByb3BlcnR5KCdmbG93JykpIHtcblx0XHRcdFx0XHRcdFx0ZC5yYWRpdXMgPSBzaXplU2NhbGUoZC5mbG93KTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGQucmFkaXVzID0gNTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGQuaGFzT3duUHJvcGVydHkoXCJjbF90b3BcIikpIHtcblx0XHRcdFx0XHRcdFx0ZC5jb2xvciA9IGNvbG9yKGQuY2xfdG9wKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGQuY29sb3IgPSBkZWZhdWx0Q29sb3I7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0dmFyIG5vZGVDaXJjbGUgPSBub2RlRW50ZXJcblx0XHRcdFx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIGQueCArIFwiLFwiICsgZC55ICsgXCIpXCI7IH0pXG5cdFx0XHRcdFx0LmFwcGVuZChcImNpcmNsZVwiKVxuXHRcdFx0XHRcdC8vIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLng7IH0pXG5cdFx0XHRcdFx0Ly8gLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTsgfSlcblx0XHRcdFx0XHQuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jb2xvcjsgfSlcblx0XHRcdFx0XHQuYXR0cihcInJcIiwgMCk7XG5cblx0XHRcdFx0aWYgKHQgIT09IG51bGwpIHtcblx0XHRcdFx0XHQvLyBub2RlRW50ZXIuZWFjaChmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0Ly8gXHRkLnggPSB3aWR0aC8yO1xuXHRcdFx0XHRcdC8vIFx0ZC55ID0gaGVpZ2h0LzI7XG5cdFx0XHRcdFx0Ly8gfSk7XG5cdFx0XHRcdFx0bm9kZVxuXHRcdFx0XHRcdFx0LnNlbGVjdEFsbChcImNpcmNsZVwiKS50cmFuc2l0aW9uKHQpXG5cdFx0XHRcdFx0XHQuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5yYWRpdXM7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC8vIC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmNvbG9yX29yaWcgPSBjb2xvcihkLmNsX3RvcCk7IH0pO1xuXHRcdFx0XHRcdFx0LmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGQuY29sb3I7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdG5vZGUuc2VsZWN0QWxsKFwiY2lyY2xlXCIpXG5cdFx0XHRcdFx0XHQuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5yYWRpdXM7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC8vIC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmNvbG9yX29yaWcgPSBjb2xvcihkLmNsX3RvcCk7IH0pO1xuXHRcdFx0XHRcdFx0LmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGQuY29sb3I7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBub2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBlbnRlckxpbmtzKGxpbmssIHQgPSBudWxsKSB7XG5cdFx0XHRcdC8vIHBhc3MgaW4gdGhlIHNlbGVjdGlvbiBmb3IgZW50ZXJpbmcgbGlua3Ncblx0XHRcdFx0XG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgbGlua0VudGVyID0gbGluay5lbnRlcigpLmFwcGVuZChcImxpbmVcIilcblx0XHRcdFx0XHQuYXR0cihcIngxXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc291cmNlLng7IH0pXG5cdFx0XHRcdFx0LmF0dHIoXCJ5MVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnNvdXJjZS55OyB9KVxuXHRcdFx0XHRcdC5hdHRyKFwieDJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50YXJnZXQueDsgfSlcblx0XHRcdFx0XHQuYXR0cihcInkyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudGFyZ2V0Lnk7IH0pXG5cdFx0XHRcdFx0LmF0dHIoXCJjbGFzc1wiLCBcImxpbmtcIik7XG5cdFx0XHRcdGxpbmsgPSBsaW5rLm1lcmdlKGxpbmtFbnRlcik7XG5cdFx0XHRcdGxpbmtcblx0XHRcdFx0ICAuYXR0cihcInN0cm9rZS13aWR0aFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBNYXRoLnNxcnQoZC53ZWlnaHQpOyB9KTtcblxuXHRcdFx0XHRpZiAodCAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdGxpbmtFbnRlclxuXHRcdFx0XHRcdFx0Ly8gLnN0eWxlKFwib3BhY2l0eVwiLCAwKVxuXHRcdFx0XHRcdFx0LnN0eWxlKFwic3Ryb2tlXCIsIFwiZ3JlZW5cIilcblx0XHRcdFx0XHQvLyBsaW5rRW50ZXIudHJhbnNpdGlvbih0KVxuXHRcdFx0XHRcdC8vIFx0LnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGxpbms7XG5cdFx0XHR9XG5cblxuXHRcdFx0Z3JhcGgubm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XG5cdFx0XHRcdGQuaWQgPSBkLmlkLnRvU3RyaW5nKCk7XG5cdFx0XHR9KTtcblx0XHRcdGdyYXBoLmxpbmtzLmZvckVhY2goZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRkLmlkID0gZ2V0TGlua0lkKGQsIGdyYXBoLmRpcmVjdGVkKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR2YXIgc2ltdWxhdGlvbiA9IGQzLmZvcmNlU2ltdWxhdGlvbigpXG5cdFx0XHRcdC5mb3JjZShcImxpbmtcIiwgZDMuZm9yY2VMaW5rKCkuaWQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5pZDsgfSkpXG5cdFx0XHRcdC8vIC5mb3JjZShcImxpbmtcIiwgZDMuZm9yY2VMaW5rKCkpXG5cdFx0XHRcdC5mb3JjZShcImNoYXJnZVwiLCBtYW55Qm9keSlcblx0XHRcdFx0LmZvcmNlKFwiY2VudGVyXCIsIGQzLmZvcmNlQ2VudGVyKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMikpO1xuXG5cdFx0ICBzaW11bGF0aW9uXG5cdFx0XHQgIC5ub2RlcyhncmFwaC5ub2Rlcylcblx0XHRcdCAgLm9uKFwidGlja1wiLCB0aWNrZWQpO1xuXG5cdFx0ICBzaW11bGF0aW9uLmZvcmNlKFwibGlua1wiKVxuXHRcdFx0ICAubGlua3MoZ3JhcGgubGlua3MpO1xuXG5cdFx0ICB0aGlzLnNpbXVsYXRpb24gPSBzaW11bGF0aW9uO1xuXG5cdFx0XHR2YXIgc2l6ZVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuXHRcdFx0XHQucmFuZ2UoWzQsIDEyXSk7XG5cblxuXHRcdFx0dmFyIGcgPSBzdmcuYXBwZW5kKFwiZ1wiKTtcblxuXHRcdCAgdmFyIGxpbmsgPSBnLmFwcGVuZChcImdcIilcblx0XHRcdCAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtzXCIpXG5cdFx0XHQvLyAuc2VsZWN0QWxsKFwibGluZVwiKVxuXHRcdFx0LnNlbGVjdEFsbChcIi5saW5rXCIpO1xuXG5cdFx0XHRsaW5rID0gbGluay5kYXRhKGdyYXBoLmxpbmtzLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdHJldHVybiBkLmlkO1xuXHRcdFx0fSk7XG5cblx0XHQgIHZhciBub2RlID0gZy5hcHBlbmQoXCJnXCIpXG5cdFx0XHQgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2Rlc1wiKVxuXHRcdFx0LnNlbGVjdEFsbChcIi5ub2RlXCIpO1xuXG5cdFx0XHRub2RlID0gbm9kZS5kYXRhKGdyYXBoLm5vZGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkOyB9KTtcblxuXHRcdFx0bm9kZSA9IGVudGVyTm9kZXMobm9kZSk7XG5cdFx0XHRsaW5rID0gZW50ZXJMaW5rcyhsaW5rKTtcblxuXG5cdFx0XHQvLyBub2RlQ2lyY2xlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdC8vIFx0bm9kZS5jbGFzc2VkKCdmb2N1cycsIGZhbHNlKTtcblx0XHRcdC8vIFx0bm9kZS5zZWxlY3RBbGwoXCJ0ZXh0XCIpLnN0eWxlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cdFx0XHQvLyBcdG5vZGVDaXJjbGUuYXR0cihcImZpbGxcIiwgXCJibGFja1wiKVxuXHRcdFx0Ly8gXHRcdC5zdHlsZShcIm9wYWNpdHlcIiwgLjEpO1xuXHRcdFx0Ly8gXHRsaW5rLnN0eWxlKFwib3BhY2l0eVwiLCAuMSk7XG5cdFx0XHQvLyBcdHZhciBjb21wb25lbnRfaWRzID0gZ3JhcGguZ3JhcGguY29ubmVjdGVkX2NvbXBvbmVudHNbZC5jb21wb25lbnRdO1xuXHRcdFx0Ly8gXHR2YXIgY29tcG9uZW50ID0gbm9kZS5maWx0ZXIoZnVuY3Rpb24oZCkge3JldHVybiBjb21wb25lbnRfaWRzLmluY2x1ZGVzKGQuaWQpOyB9KTtcblx0XHRcdC8vIFx0dmFyIGNvbXBvbmVudExpbmsgPSBsaW5rLmZpbHRlcihmdW5jdGlvbihkKSB7cmV0dXJuIGNvbXBvbmVudF9pZHMuaW5jbHVkZXMoZC5zb3VyY2UuaWQpO30pXG5cdFx0XHQvLyBcdHZhciBjb21wb25lbnRDb2xvciA9IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKTtcblx0XHRcdC8vIFx0Y29tcG9uZW50LmNsYXNzZWQoXCJmb2N1c1wiLCB0cnVlKTtcblx0XHRcdC8vIFx0Y29tcG9uZW50LnNlbGVjdEFsbChcImNpcmNsZVwiKS5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBjb21wb25lbnRDb2xvcihkLmNsX2JvdHRvbSk7IH0pXG5cdFx0XHQvLyBcdFx0LnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcblx0XHRcdC8vIFx0Y29tcG9uZW50LnNlbGVjdEFsbChcInRleHRcIikuc3R5bGUoXCJkaXNwbGF5XCIsIFwiXCIpOyAgLy8gc2hvdyB0aGVzZSBsYWJlbHNcblx0XHRcdC8vIFx0Y29tcG9uZW50TGluay5zdHlsZShcIm9wYWNpdHlcIiwgMSk7XG5cdFx0XHQvLyBcdFxuXHRcdFx0Ly8gXHQkKCAnI25vZGVsYWItZm9ybScgKS5jc3MoICd2aXNpYmlsaXR5JyAsICd2aXNpYmxlJyApO1xuXHRcdFx0Ly8gXHRhcHBseVJhZGlvU2VsZWN0aW9uKCk7XG5cdFx0XHQvL1xuXHRcdFx0Ly8gXHRkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdC8vXG5cdFx0XHQvLyB9KTtcblxuXG5cblx0XHQgIGZ1bmN0aW9uIHRpY2tlZCgpIHtcblx0XHRcdC8vIG5vZGVcblx0XHRcdC8vICAgICAuYXR0cihcImN4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSlcblx0XHRcdC8vICAgICAuYXR0cihcImN5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTsgfSk7XG5cdFx0XHQvLyBhZGQgYm91bmRpbmcgYm94XG5cdFx0XHQvLyAgIGh0dHBzOi8vYmwub2Nrcy5vcmcvbWJvc3RvY2svMTEyOTQ5MlxuXHRcdFx0bm9kZVxuXHRcdFx0XHQuYXR0cihcImN4XCIsIGZ1bmN0aW9uKGQpIHsgXG5cdFx0XHRcdFx0ZC54ID0gTWF0aC5tYXgoZC5yYWRpdXMsIE1hdGgubWluKHdpZHRoIC0gZC5yYWRpdXMsIGQueCkpO1xuXHRcdFx0XHRcdHJldHVybiBkLng7IH0pXG5cdFx0XHRcdC5hdHRyKFwiY3lcIiwgZnVuY3Rpb24oZCkgeyBcblx0XHRcdFx0XHRkLnkgPSBNYXRoLm1heChkLnJhZGl1cywgTWF0aC5taW4od2lkdGggLSBkLnJhZGl1cywgZC55KSk7XG5cdFx0XHRcdFx0cmV0dXJuIGQueTsgfSlcblx0XHRcdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiOyB9KTtcblxuXHRcdFx0bGlua1xuXHRcdFx0XHQvLyAuc2VsZWN0QWxsKFwibGluZVwiKVxuXHRcdFx0XHQuYXR0cihcIngxXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc291cmNlLng7IH0pXG5cdFx0XHRcdC5hdHRyKFwieTFcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5zb3VyY2UueTsgfSlcblx0XHRcdFx0LmF0dHIoXCJ4MlwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC54OyB9KVxuXHRcdFx0XHQuYXR0cihcInkyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudGFyZ2V0Lnk7IH0pO1xuXHRcdCAgfVxuXG5cdFx0XHRmdW5jdGlvbiByZXNldF9sYXlvdXQoKSB7XG5cdFx0XHRcdG5vZGUuY2xhc3NlZChcImZvY3VzXCIsIGZhbHNlKTtcblx0XHRcdFx0bm9kZS5zZWxlY3RBbGwoXCJ0ZXh0XCIpLnN0eWxlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cdFx0XHRcdC8vIG5vZGVDaXJjbGUuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jb2xvcl9vcmlnOyB9KVxuXHRcdFx0XHQvLyBcdC5zdHlsZShcIm9wYWNpdHlcIiwgMSk7XG5cdFx0XHRcdGxpbmsuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuXHRcdFx0XHQkKCAnI25vZGVsYWItZm9ybScgKS5jc3MoICd2aXNpYmlsaXR5JyAsICdoaWRkZW4nICk7XG5cdFx0XHR9XG5cdFx0XHRzdmcub24oXCJjbGlja1wiLCByZXNldF9sYXlvdXQpO1xuXG5cdFx0XHQvLyBUT0RPIHRoaXMgaXMgYnJva2VuLiBmaXggaXQuXG5cdFx0XHQvLyB2YXIgZnVzZSA9IG5ldyBGdXNlKGdyYXBoLm5vZGVzLCBmdXNlT3B0aW9ucyk7XG5cdFx0XHQvLyB2YXIgcmVzdWx0ID0gZnVzZS5zZWFyY2goXCJlaGxvd1wiKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cdFx0XHQvLyAkKCAnI3RleHRTZWFyY2gnICkub24oICdpbnB1dCcsIGZ1c2VTZWxlY3QgKTtcblx0XHRcdC8vIGZ1bmN0aW9uIGZ1c2VTZWxlY3QoKSB7XG5cdFx0XHQvLyBcdC8vIHJlc2V0IG5vZGUgc2l6ZXMgYW5kIHN0eWxlc1xuXHRcdFx0Ly8gXHRkMy5zZWxlY3RBbGwoXCIubm9kZSBjaXJjbGVcIilcblx0XHRcdC8vIFx0XHQuc3R5bGUoXCJzdHJva2Utd2lkdGhcIiwgMSlcblx0XHRcdC8vIFx0XHQuc3R5bGUoXCJzdHJva2VcIiwgXCJ3aGl0ZVwiKVxuXHRcdFx0Ly8gXHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnJhZGl1czsgfSk7XG4gICAgICAgICAgICAvL1xuXHRcdFx0Ly8gXHR2YXIgJHRoaXMgPSAkKCB0aGlzICk7XG5cdFx0XHQvLyBcdHZhciBxdWVyeSA9ICR0aGlzLnZhbCgpO1xuXHRcdFx0Ly8gXHRjb25zb2xlLmxvZygkdGhpcy52YWwoKSk7XG5cdFx0XHQvLyBcdGlmIChxdWVyeS5sZW5ndGggPiAzKSB7XG5cdFx0XHQvLyBcdFx0dmFyIHJlc3VsdCA9IGZ1c2Uuc2VhcmNoKHF1ZXJ5KTtcblx0XHRcdC8vIFx0XHRpZiAocmVzdWx0Lmxlbmd0aCAhPTApIHtcblx0XHRcdC8vIFx0XHRcdGZvciAodmFyIGkgPSAwLCBsZW4gPSByZXN1bHQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdC8vIFx0XHRcdFx0dmFyIGF1dGhvcklkID0gcmVzdWx0W2ldO1xuXHRcdFx0Ly8gXHRcdFx0XHRub2RlLmZpbHRlcihmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkID09IGF1dGhvcklkOyB9KVxuXHRcdFx0Ly8gXHRcdFx0XHRcdC5zZWxlY3QoXCJjaXJjbGVcIilcblx0XHRcdC8vIFx0XHRcdFx0XHQuc3R5bGUoXCJzdHJva2Utd2lkdGhcIiwgMilcblx0XHRcdC8vIFx0XHRcdFx0XHQuc3R5bGUoXCJzdHJva2VcIiwgXCJibGFja1wiKVxuXHRcdFx0Ly8gXHRcdFx0XHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnJhZGl1cyAqIDEuNTsgfSk7XG5cdFx0XHQvLyBcdFx0XHR9XG5cdFx0XHQvLyBcdFx0fVxuXHRcdFx0Ly8gXHR9XG5cdFx0XHQvLyB9XG5cblx0XHRcdC8vIHVwZGF0ZVdpZHRoID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBcdC8vIHVzZSB3aWR0aCB0byBtYWtlIGFueSBjaGFuZ2VzXG5cdFx0XHQvLyBcdC8vXG5cdFx0XHQvLyBcdC8vIE5PVCBJTVBMRU1FTlRFRFxuXHRcdFx0Ly8gfTtcblxuXG5cblxuXHRcdH0pO1xuXHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8vIHVwZGF0ZURhdGEoKSB7XG5cdC8vIFx0Ly8gdXNlIEQzIHVwZGF0ZSBwYXR0ZXJuIHdpdGggZGF0YVxuICAgIC8vXG5cdC8vIFx0dmFyIGdyYXBoID0gdGhpcy5fZGF0YTtcblx0Ly8gXHRncmFwaC5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcblx0Ly8gXHRcdGQuaWQgPSBkLmlkLnRvU3RyaW5nKCk7XG5cdC8vIFx0fSlcblx0Ly8gXHRncmFwaC5saW5rcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcblx0Ly8gXHRcdGQuaWQgPSBnZXRMaW5rSWQoZCwgZ3JhcGguZGlyZWN0ZWQpO1xuXHQvLyBcdH0pO1xuXHQvLyBcdHRoaXMuc2ltdWxhdGlvblxuXHQvLyBcdFx0Lm5vZGVzKGdyYXBoLm5vZGVzKVxuXHQvLyBcdFx0Lm9uKFwidGlja1wiLCB0aWNrZWQpO1xuICAgIC8vXG5cdC8vIFx0c2ltdWxhdGlvbi5mb3JjZShcImxpbmtcIilcblx0Ly8gXHRcdC5saW5rcyhncmFwaC5saW5rcyk7XG5cdC8vIFx0Y29uc29sZS5sb2coZ3JhcGgpO1xuXHQvLyBcdHNpbXVsYXRpb24uc3RvcCgpO1xuXHQvLyBcdG5vZGUgPSBub2RlLmRhdGEoZ3JhcGgubm9kZXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuaWQ7IH0pO1xuXHQvLyBcdHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpO1xuXHQvLyBcdC8vIG5vZGVFeGl0LnNlbGVjdEFsbChcImNpcmNsZVwiKS5hdHRyKFwiZmlsbFwiLCBcInJlZFwiKTtcblx0Ly8gXHR2YXIgdCA9IGQzLnRyYW5zaXRpb24oJ3VwZGF0ZURhdGEnKS5kdXJhdGlvbig1MDAwKTtcblx0Ly8gXHRub2RlRXhpdC5zZWxlY3RBbGwoXCJjaXJjbGVcIikuc3R5bGUoXCJzdHJva2VcIiwgXCJyZWRcIikudHJhbnNpdGlvbih0KS5hdHRyKFwiclwiLCAwKTtcblx0Ly8gXHRub2RlID0gZW50ZXJOb2Rlcyhub2RlLCB0KTtcblx0Ly8gXHQvLyBub2RlID0gbm9kZS5jYWxsKGVudGVyTm9kZXMsIHQpO1xuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuXHQvLyBcdGxpbmsgPSBsaW5rXG5cdC8vIFx0XHQuZGF0YShncmFwaC5saW5rcywgZnVuY3Rpb24oZCkge1xuXHQvLyBcdFx0XHQvLyBkLmlkID0gZ2V0TGlua0lkKGQpO1xuXHQvLyBcdFx0XHRyZXR1cm4gZC5pZDtcblx0Ly8gXHRcdH0pO1xuXHQvLyBcdHZhciBsaW5rRXhpdCA9IGxpbmsuZXhpdCgpO1xuXHQvLyBcdGxpbmtFeGl0LnN0eWxlKFwic3Ryb2tlXCIsIFwicmVkXCIpLnRyYW5zaXRpb24odCkuc3R5bGUoXCJvcGFjaXR5XCIsIDApLnJlbW92ZSgpO1xuXHQvLyBcdC8vIGxpbmtFeGl0LnJlbW92ZSgpO1xuXHQvLyBcdGxpbmsgPSBlbnRlckxpbmtzKGxpbmssIHQpO1xuXHQvLyBcdHNpbXVsYXRpb24ub24oXCJ0aWNrXCIpLmNhbGwoKTtcbiAgICAvL1xuICAgIC8vXG5cdC8vIFx0dC5lbmQoKS50aGVuKGZ1bmN0aW9uKGQpIHtcblx0Ly8gXHRcdG5vZGVFeGl0LnJlbW92ZSgpO1xuXHQvLyBcdFx0Ly8gc2ltdWxhdGlvbi5hbHBoYSgxKS5yZXN0YXJ0KCk7XG5cdC8vIFx0XHQvLyBzaW11bGF0aW9uXG5cdC8vIFx0XHRcdC8vIC5hbHBoYURlY2F5KC4wMDA1KVxuXHQvLyBcdFx0XHQvLyAudmVsb2NpdHlEZWNheSgwLjkpXG5cdC8vIFx0XHRcdC8vIC5hbHBoYSguMSlcblx0Ly8gXHRcdFx0Ly8gLnJlc3RhcnQoKTtcblx0Ly8gXHR9KTtcblx0Ly8gXHRcblx0Ly8gXHQvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQvLyBcdC8vIH0sIDQwMDApO1xuXHQvLyB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5vZGVMaW5rQ29hdXRob3JzaGlwVmlzO1xuIiwiaW1wb3J0IHRpcHB5IGZyb20gJ3RpcHB5LmpzJztcbi8vIGNvbnN0IHRpcHB5ID0gcmVxdWlyZSgnLi4vbm9kZV9tb2R1bGVzL3RpcHB5LmpzLycpO1xuaW1wb3J0ICd0aXBweS5qcy90aGVtZXMvbGlnaHQtYm9yZGVyLmNzcyc7XG5cbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBqUXVlcnkgZnJvbSAnanF1ZXJ5JztcbmNvbnN0ICQgPSBqUXVlcnk7XG5cbmV4cG9ydCBkZWZhdWx0IGFjdGl2YXRlVG9vbHRpcHM7XG5cbnRpcHB5LnNldERlZmF1bHRzKHtcblx0J3RoZW1lJzogJ2xpZ2h0LWJvcmRlcicsXG5cdCdhbmltYXRlRmlsbCc6IGZhbHNlLFxuXHQnYW5pbWF0aW9uJzogJ2ZhZGUnLFxufSk7XG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b29sdGlwLXRlbXBsYXRlJyk7XG5cbmZ1bmN0aW9uIGFjdGl2YXRlVG9vbHRpcHMoKSB7XG5cdGNvbnNvbGUubG9nKCdhY3RpdmF0ZVRvb2x0aXBzKCknKTtcblxuXHRmdW5jdGlvbiBmaWxsSHRtbCgkdGVtcGxhdGUsIGNsYXNzbmFtZSwgdGV4dENvbnRlbnQpIHtcblx0XHQkdGVtcGxhdGUuZmluZCggJy4nICsgY2xhc3NuYW1lICkuZmluZCggJy50ZW1wbGF0ZS1jb250ZW50JyApLnRleHQodGV4dENvbnRlbnQpO1xuXHR9XG5cblx0ZDMuc2VsZWN0QWxsKCcubm9kZSBjaXJjbGUnKS5lYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHR2YXIgJHRvb2x0aXBOb2RlID0gJCh0ZW1wbGF0ZSkuY2xvbmUoKS5hdHRyKFwiaWRcIiwgbnVsbCk7XG5cdFx0aWYgKHRoaXMuaGFzT3duUHJvcGVydHkoXCJfdGlwcHlcIikpIHtcblx0XHRcdHZhciB0aXBweUluc3RhbmNlID0gdGhpcy5fdGlwcHk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciB0aXBweUluc3RhbmNlID0gdGlwcHkodGhpcyk7XG5cdFx0fVxuXHRcdGZpbGxIdG1sKCR0b29sdGlwTm9kZSwgJ2F1dGhvcl9uYW1lJywgZC5hdXRob3JfbmFtZSk7XG5cdFx0aWYgKGQuaGFzT3duUHJvcGVydHkoJ2FmZmlsX25hbWUnKSAmJiBkLmFmZmlsX25hbWUubGVuZ3RoKSB7XG5cdFx0XHRmaWxsSHRtbCgkdG9vbHRpcE5vZGUsICdhZmZpbF9uYW1lJywgZC5hZmZpbF9uYW1lKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JHRvb2x0aXBOb2RlLmZpbmQoJy5hZmZpbF9uYW1lJykuaGlkZSgpO1xuXHRcdH1cblx0XHQvLyBpZiAoZC5oYXNPd25Qcm9wZXJ0eSgnY2xfYm90dG9tJykpIGZpbGxIdG1sKCR0b29sdGlwTm9kZSwgJ2NsdXN0ZXJfaWQnLCBkLmNsX2JvdHRvbSk7XG5cdFx0dmFyICRwYXBlclRpdGxlcyA9ICR0b29sdGlwTm9kZS5maW5kKCAnLnBhcGVyX3RpdGxlcycgKS5maW5kKCAnLnRlbXBsYXRlLWNvbnRlbnQnICk7XG5cdFx0dmFyIHBhcGVycyA9IGQucGFwZXJzO1xuXHRcdC8vIHNvcnQgcGFwZXJzIGFscGhhYmV0aWNhbGx5XG5cdFx0cGFwZXJzLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gZDMuYXNjZW5kaW5nKGEudGl0bGUsIGIudGl0bGUpOyB9KTtcblx0XHRmb3IgKHZhciBpID0gMCwgbGVuID0gcGFwZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHR2YXIgJGxpc3RJdGVtID0gJCggJzxsaSBjbGFzcz1cInBhcGVyX3RpdGxlXCI+JyApLnRleHQocGFwZXJzW2ldLnRpdGxlKTtcblx0XHRcdCRwYXBlclRpdGxlcy5hcHBlbmQoICRsaXN0SXRlbSApO1xuXHRcdH1cblx0XHR0aXBweUluc3RhbmNlLnNldENvbnRlbnQoJHRvb2x0aXBOb2RlLmh0bWwoKSk7XG5cdH0pO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181X187Il0sInNvdXJjZVJvb3QiOiIifQ==